<!DOCTYPE html>
<html lang="en"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<<<<<<< HEAD
<head th:replace="~{fragments/page-header :: header('Home')}">

=======
<head th:replace = "~{fragments/page-header :: header('新規登録')}">
>>>>>>> 05e801533b0d9f9a65448bc26185f3ffa03f1752
</head>

<body class="animsition">

	<!-- Header -->
<<<<<<< HEAD
	<div th:replace="~{fragments/nav-header :: nav-header}"></div>


	<!-- breadcrumb -->
	<div class="container">
		<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
			<a href="index.html" class="stext-109 cl8 hov-cl1 trans-04">
				ホーム
				<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
			</a>

			<span class="stext-109 cl4">
				アカウント
			</span>
		</div>
	</div>


	<!-- Shoping Cart -->
	<form class="bg0 p-t-75 p-b-85">
=======
	<head th:replace="~{fragments/nav-header :: nav-header}">


	<!-- Title page -->
	<section class="bg-img1 txt-center p-lr-15 p-tb-92" style="background-image: url('images/bg-01.jpg');">
		<h2 class="ltext-105 cl0 txt-center">
			会員情報
		</h2>
	</section>

	<!-- Content page -->
	<section class="bg0 p-t-104 p-b-116">
>>>>>>> 05e801533b0d9f9a65448bc26185f3ffa03f1752
		<div class="container">
			<div class="flex-w flex-c">
				<div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md">
					<form th:action="@{/account/u}" th:object="${customer}" th:method="POST">
						<h4 class="mtext-105 cl2 txt-center p-b-30">
							会員情報
						</h4>
						<!-- エラーメッセージ表示-->
						<b id = "emailError_msg"></b>
						<!-- エラーメッセージ表示-->
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									E-Mail
								</span>
							</div>

							<div class="size-204">
								<input type="text" id="email" name="email" th:field="*{email}" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" oninput="nullCheck(); reInputEmail();" readonly>
							</div>
						</div>
<<<<<<< HEAD
						<div class="bor12 p-b-13 hov-cl1 m-b-18">
							<a class="size-208" th:href="@{/order/history}">
=======
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
>>>>>>> 05e801533b0d9f9a65448bc26185f3ffa03f1752
								<span class="stext-110 cl2">
									パスワード
								</span>
							</div>

							<div class="size-204">
								<input type="password" id="password" name="password" th:field="*{password}" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" oninput="confirmPassword(); nullCheck();">
							</div>
						</div>
						<!-- エラーメッセージ表示-->
						<b id = "passwordError_msg"></b>
						<!-- エラーメッセージ表示-->
						<div class="flex-w flex-m m-b-10 p-b-13 ">
							<div class="size-203">
								<b id="error_msg"></b>
								<span class="stext-110 cl2">
									確認パスワード
								</span>
							</div>

							<div class="size-204">
								<input type="password" id="rePassword" name="rePassword" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" oninput="confirmPassword(); nullCheck();">
							</div>
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									性
								</span>
							</div>

							<div class="size-204">
								<input type="text" id="firstName" th:field="*{firstName}" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" placeholder="フリガナ" oninput="nullCheck()">
							</div>
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									名
								</span>
							</div>

<<<<<<< HEAD
					</div>
				</div>
				<!--left-nav-end-->

				<div class="col-lg-10 col-xl-9 m-lr-auto m-b-50">
					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								E-Mail
							</span>
						</div>

						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10" th:text="${cust.email}"></span>
						</div>
					</div>
					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								パスワード
							</span>
						</div>

						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10">*************</span>
						</div>
					</div>

					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								性
							</span>
						</div>

						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10" th:text="${cust.firstName}">satoru</span>
						</div>
					</div>
					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								名
							</span>
						</div>

						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10" th:text="${cust.lastName}">Gojo</span>
						</div>
					</div>
					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								性別
							</span>
						</div>

						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10" th:text="${cust.sex.sexName}">男性</span>

						</div>
					</div>
					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								電話番号
							</span>
=======
							<div class="size-204">
								<input type="text" id="lastName" th:field="*{lastName}" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" placeholder="フリガナ" oninput="nullCheck()">	
							</div>
>>>>>>> 05e801533b0d9f9a65448bc26185f3ffa03f1752
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									性別
								</span>
							</div>

							<div class="size-204">
								<div class="flex-w flex-sa-m">
									<span class="flex-w">
										<input type="radio" id="gender" name="gender" class="stext-111 p-lr-10" value="1">男性
									</span>
									<span class="flex-w">
										<input type="radio" id="gender" name="gender" class="stext-111" value = "2">女性
									</span>
								</div>

							</div>
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									電話番号
								</span>
							</div>

<<<<<<< HEAD
						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10"
								th:text="${cust.phoneNumber}">080-8888-8888</span>
						</div>
					</div>
					<div class="flex-w flex-m m-b-10 p-b-13">
						<div class="size-203">
							<span class="stext-110 cl2">
								住所
							</span>
=======
							<div class="size-204">
								<input type="text" id="phoneNumber" th:field="*{phoneNumber}" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" placeholder="000-0000-0000" oninput="nullCheck()">	
							</div>
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									郵便番号
								</span>
							</div>

							<div class="size-204">
								<input type="text" id="postCode" name="postCode" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" placeholder="123-4567" oninput="nullCheck()">	
							</div>
>>>>>>> 05e801533b0d9f9a65448bc26185f3ffa03f1752
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									住所
								</span>
							</div>

<<<<<<< HEAD
						<div class="size-204">
							<span class="stext-111 cl2 plh3 size-111  p-l-10"
								th:text="${cust.address.fullAddress}">千葉県稲毛区小仲台</span>
						</div>
					</div>


					<a href="account-edit.html"
						class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer m-t-50">
						変更
					</a>

=======
							<div class="size-204">
								<input type="text" id="firstAddress" name="firstAddress" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" placeholder="市区町" oninput="nullCheck()">
							</div>
						</div>
						<div class="flex-w flex-m m-b-10 p-b-13">
							<div class="size-203">
								<span class="stext-110 cl2">
									住所
								</span>
							</div>

							<div class="size-204">
								<input type="text" id="lastAddress" name="lastAddress" class="stext-111 cl2 plh3 size-111 bor10 p-l-10" placeholder="番地,マンション名" oninput="nullCheck()">	
							</div>
						</div>
						<input type="hidden" id="custId" name="custId">
						<button id="button_" disabled class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer m-t-50">更新</button>
					</form>
>>>>>>> 05e801533b0d9f9a65448bc26185f3ffa03f1752
				</div>
			</div>
		</div>
	</section>
	
	<!-- email自動送信用フォーム 
	<form name="emailCheckForm" id="emailCheckForm" th:action="@{/checkAcc}" th:method="GET">
		<input type="hidden" id="sendEmail" name="sendEmail">
	</form>-->
	
	<!-- Map -->


	<!-- Footer -->
	<div th:replace="~{fragments/footer :: footer}"></div>
	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

	<!--===============================================================================================-->
	<div th:replace="~{fragments/js-common :: import-js}"></div>

	</script>
	<!--===============================================================================================-->
	<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script>
		$('.js-pscroll').each(function () {
			$(this).css('position', 'relative');
			$(this).css('overflow', 'hidden');
			var ps = new PerfectScrollbar(this, {
				wheelSpeed: 1,
				scrollingThreshold: 1000,
				wheelPropagation: false,
			});

			$(window).on('resize', function () {
				ps.update();
			})
		});
	</script>
	<!--===============================================================================================-->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAKFWBqlKAGCeS1rMVoaNlwyayu0e0YRes"></script>
	<script src="js/map-custom.js"></script>
	<!--===============================================================================================-->
	<script src="js/main.js"></script>
	<!--========================================ここから追加したやつ==========================================-->
	<script th:inline="javascript">
		
		//hidden
		const custId = document.getElementById('custId');
		
		//コントローラから受け取った値を変数に代入
		const custIdValue = /*[[${custId}]]*/"custId";
		if (!custIdValue == "") custId.defaultValue = custIdValue;
		
		
		//ボタン制御
		var passwordCheck = false;	//パスワードが一致したらtrue
		
		const email = document.getElementById('email');
		const password = document.getElementById('password');
		let gender = document.getElementsByName('gender');
		const firstName = document.getElementById('firstName');
		const lastName = document.getElementById('lastName');
		const phoneNumber = document.getElementById('phoneNumber');
		const postCode = document.getElementById('postCode');
		const firstAddress = document.getElementById('firstAddress');
		const lastAddress = document.getElementById('lastAddress');
		const button = document.getElementById('button_');
		//コントローラから受け取った値を変数に代入する(DBの取得結果の初期値として代入する用)。
		const emailDBValue = /*[[${emailDBValue}]]*/"emailDBValue";
		const passwordDBValue = /*[[${passwordDBValue}]]*/"passwordDBValue";
		const sexDBValue = /*[[${sexDBValue}]]*/"sexDBValue";
		const firstNameDBValue = /*[[${firstNameDBValue}]]*/"firstNameDBValue";
		const lastNameDBValue = /*[[${lastNameDBValue}]]*/"lastNameDBValue";
		const phoneNumberDBValue = /*[[${phoneNumberDBValue}]]*/"phoneNumberDBValue";
		const postCodeDBValue = /*[[${postCodeDBValue}]]*/"postCodeDBValue";
		const firstAddressDBValue = /*[[${firstAddressDBValue}]]*/"firstAddressDBValue";
		const lastAddressDBValue = /*[[${lastAddressDBValue}]]*/"lastAddressDBValue";
		
		//controllerから受け取った値をフォームの初期値にする(ページ再読み込みの値保持用)。
		//if (!firstNameValue == "")firstName.defaultValue = firstNameValue;
		//if (!lastNameValue == "")lastName.defaultValue = lastNameValue;
		//if (!phoneNumberValue == "")phoneNumber.defaultValue = phoneNumberValue;
		//if (!postCodeValue == "")postCode.defaultValue = postCodeValue;
		//if (!firstAddressValue == "")firstAddress.defaultValue = firstAddressValue;
		//if (!lastAddressValue == "")lastAddress.defaultValue = lastAddressValue;
		//コントローラから受け取った値を変数に代入する(DBの取得結果の初期値として代入する用)。
		if (!emailDBValue == "")email.defaultValue = emailDBValue;
		if (!passwordDBValue == "")password.defaultValue = passwordDBValue;
		if (sexDBValue == 1) {
			gender[0].checked = true;
		} else if(sexDBValue == 2) {
			gender[1].checked = true;
		}
		if (!firstNameDBValue == "")firstName.defaultValue = firstNameDBValue;
		if (!lastNameDBValue == "")lastName.defaultValue = lastNameDBValue;
		if (!phoneNumberDBValue == "")phoneNumber.defaultValue = phoneNumberDBValue;
		if (!postCodeDBValue == "")postCode.defaultValue = postCodeDBValue;
		if (!firstAddressDBValue == "")firstAddress.defaultValue = firstAddressDBValue;
		if (!lastAddressDBValue == "")lastAddress.defaultValue = lastAddressDBValue;
		
		
		//新規登録画面ロードした瞬間にボタンを灰色にする
		window.addEventListener('load', (event) => {
  			button.style.backgroundColor = "gray";
		});
		
		
		//入力するたびにパスワード一致チェック
		function confirmPassword() {
  			const password = document.getElementById('password').value;
  			const confirmPassword = document.getElementById('rePassword').value;
            const errorMsg = document.getElementById('passwordError_msg');
            
            if (password != "") {
				if (password == confirmPassword) {
	                errorMsg.innerText = "";
	                passwordCheck = true;
	            } else {
	                errorMsg.innerText = "パスワードが一致しません";
	                passwordCheck = false;
	            }
			} else {
				errorMsg.innerText = "パスワードを入力してください";
				passwordCheck = false;
			}
			errorMsg.style.color = "red";
        }
        
        
        //入力するたびに必須項目のNULLチェック
		function nullCheck() {
			const email = document.getElementById('email').value;
			const password = document.getElementById('password').value;
			const rePassword = document.getElementById('rePassword').value;
			const firstName = document.getElementById('firstName').value;
			const lastName = document.getElementById('lastName').value;
			const phoneNumber = document.getElementById('phoneNumber').value;
			const postCode = document.getElementById('postCode').value;
			const firstAddress = document.getElementById('firstAddress').value;
			const lastAddress = document.getElementById('lastAddress').value;
			
			if(!email == "" && !password == "" && !rePassword == "" && !firstName == "" && !lastName == "" && 
               !phoneNumber == "" && !postCode == "" && !firstAddress == "" && !lastAddress == "" && passwordCheck == true) {
			    button.disabled = null;		//ボタンを押せるようにする。
			    button.style.backgroundColor = "black";
			} else {
				button.disabled = "disabled";	//ボタンを押せないようにする。
				button.style.backgroundColor = "gray";
			}
		}
	</script>
</body>
</html>